<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Use case to test case generator">

    <title>Test case generator</title>

    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="styles/layout.css">
  </head>
  <body>
    <div id="layout">
      <!-- Menu toggle -->
      <a href="#menu" id="menuLink" class="menu-link">
        <span></span>
      </a>

      <nav id="menu">
        <div class="pure-menu">
          <a class="pure-menu-heading" href="#">Menu</a>

          <ul class="pure-menu-list">
            <li class="pure-menu-item pure-menu-selected"><a href="#" class="use-cases pure-menu-link">Use cases</a></li>
            <li class="pure-menu-item"><a href="#" class="actors pure-menu-link">Actors</a></li>
            <li class="pure-menu-item"><a href="#" class="goals pure-menu-link">Goals</a></li>
            <li class="pure-menu-item"><a href="#" class="concepts pure-menu-link">Concepts</a></li>
            <li class="pure-menu-item"><a href="#" class="templates pure-menu-link">Templates</a></li>
            <li class="pure-menu-item"><a href="#" class="tests pure-menu-link">Tests</a></li>
            <li class="pure-menu-item"><a href="#" class="activities pure-menu-link" hidden>Activities</a></li>
            <li class="pure-menu-item menu-item-divided"><a href="#" class="configuration pure-menu-link">Configuration</a></li>
            <li class="pure-menu-item menu-item-divided"><a href="#" class="ui-examples pure-menu-link">:: Element tests</a></li>
          </ul>
        </div>
      </nav>

      <div id="main">
        <div class="header">
          <h2 class="title">:: title ::</h2>
        </div>

        <section id="use-cases" class="content">
          <nav class="use-case">
            <div class="pure-menu  pure-menu-horizontal pure-menu-scrollable">
              <ul class="pure-menu-list">
              </ul>
            </div>
         </nav>

          <ul class="list"></ul>
          <button class="add">Add</button>
          <button class="get-selection">Show selection</button>
        </section>

        <section id="actors" class="content" hidden>

          <h1>Actors</h1>
          <ul class="list"></ul>


            <fieldset>
              <legend>Add new concept</legend>

          <input type="text" id="input-new-actor-name" placeholder="Name" style="width:100%;"></input><br />
          <textarea style="width:100%;" id="input-new-actor-description" placeholder="Description"></textarea>

          <button class="pure-button-primary pure-button create">Create</button>
       </fieldset>
        </section>

        <section id="concepts" class="content" hidden>
          <ul class="list"></ul>
            <fieldset>
              <legend>Add new concept</legend>

          <input type="text" id="input-new-concept-name" placeholder="Name"></input><br>
          <input type="text" id="input-new-concept-description" placeholder="Description"></input>

          <button class="pure-button-primary pure-button create">Create</button>
       </fieldset>
                <div class="definitions"></div>

        </section>

        <!-- Actor goals (Use case diagrams) -->
        <section id="goals" class="content" hidden>
          <ul class="list"></ul>
          <button class="add">Add</button>
        </section>

        <section id="tests" class="content" hidden>
          <nav class="use-case">
            <div class="pure-menu  pure-menu-horizontal pure-menu-scrollable">
              <ul class="pure-menu-list">
              </ul>
            </div>
         </nav>
          <ul class="list"></ul>
          <button class="add">Add</button>
        </section>

        <section id="activities" class="content" hidden>
          <!-- Use yuml.me for rendering -->
        </section>

        <section id="templates" class="content" hidden>
           <nav class="template">
            <div class="pure-menu  pure-menu-horizontal pure-menu-scrollable">
              <ul class="pure-menu-list">
                <li class="pure-menu-item"><a href="#" class="pure-menu-link">Template 1</a></li>
                <li class="pure-menu-item"><a href="#" class="pure-menu-link">Template 2</a></li>

              </ul>
            </div>
            </nav>
        <pre>
part of or_test_fw;

abstract class SendMessage {

  static DateTime startTime = null;
  static int nextStep = 1;
  static Customer caller = null;
  static Receptionist receptionist = null;
  static Storage.Message messageStore = null;
  static Storage.Contact contactStore = null;

  static Logger log = new Logger('$libraryName.UseCase.SendMessage');

  static Future setup() {
    startTime = new DateTime.now();
    nextStep = 1;

    log.finest('Setting up preconditions...');

    log.finest ('Setting up a MessageStore...');
    messageStore = new Service.RESTMessageStore(
        Config.messageStoreUri,
        receptionist.authToken,
        new Transport.Client());

    log.finest ('Setting up a ReceptionStore...');
    contactStore= new Service.RESTContactStore(
        Config.contactStoreUri,
        receptionist.authToken,
        new Transport.Client());

    log.finest ("Send message test case: Preconditions set up.");

    return new Future.value (null);
  }

  static void teardown() {
    log.finest("Cleaning up after test...");
  }

  static Future Receptionist_Send_Message () {
    step ("Receptionist sends a message...");
    Model.Message message = new Model.Message.stub(Model.Message.noID);
    return contactStore.getByReception(4, 1).then((Model.Contact contact) {
      message.recipients = contact.distributionList;
      message.body = 'Sent from test framework.';
      message.sender = receptionist.user;
   }).then((_) {
      return messageStore.enqueue(message);
   }).then((_) {
      step ("Receptionist has sent message.");
   });
  }

  static Future Callee_Checks_For_Message () {
    step ("Callee checks for message...");
    log.severe('Assuming the message is delivered, as we do not have built '
        'access to IMAP stores yet');
    return new Future.value(null);
  }

  [%TESTCASES%]

}
        </pre>
        </section>

        <section id="configuration" class="content" hidden>
          <label for="configuration-jenkins-url" >Jenkins URL</label>
          <input id="configuration-jenkins-url"  type="text">
          <button class="save">Save</button>
        </section>

        <section id="ui-examples" class="content" hidden>
          <button class="mark-actor pure-button">
            <i class="fa fa-user"></i> Actor
          </button>
          <button class="mark-concept pure-button">
            <i class="fa fa-car"></i> Concept
          </button>
          <br />

          <select>
           <option>stuff</option>
          </select>

          <button class="mark-actor-role pure-button">
            <i class="fa fa-user-secret"></i> Actor role
          </button>
          <br />

          <select>
           <option>stuff</option>
          </select>

          <button class="mark-concept-role pure-button">
            <i class="fa fa-taxi"></i> Concept role
          </button>

            <div class="pure-g">
                <div class="use-case pure-u-1-2"></div>
                <div class="definitions pure-u-1-2"></div>
              </div>
        </section>

      </div>
      <script type="application/dart" src="main.dart"></script>
      <script data-pub-inline src="packages/browser/dart.js"></script>
    </div>
  </body>
</html>
